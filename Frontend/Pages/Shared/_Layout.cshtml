@inject IConfiguration Configuration

@{
	var apiBase = Configuration["ApiSettings:BaseAddress"];
}

<!DOCTYPE html>
<html lang="sv" data-bs-theme="light" data-api-base-url="@apiBase">
<head>
	<meta charset="utf-8" />
	<link rel="icon" type="image/x-icon" href="~/img/logo/hjartafavicon.ico" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<!-- App/brand -->
	<meta name="application-name" content="med Hjärtat som Kompass" />
	<meta name="apple-mobile-web-app-title" content="med Hjärtat som Kompass" />

	<!-- Canonical URL för SEO & delningar -->
	<link rel="canonical" href="https://medhjärtatsomkompass.se/" />
	<meta property="og:url" content="https://medhjärtatsomkompass.se/" />

	<!-- Open Graph (Facebook/WhatsApp/LinkedIn) -->
	<meta property="og:locale" content="sv_SE" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="med Hjärtat som Kompass" />
	<meta property="og:site_name" content="med Hjärtat som Kompass" />
	<meta property="og:description" content="En personlig blogg av Sara Gustafsson" />
	<meta property="og:image:type" content="image/png" />
	@{
		var ogImagePath = Url.Content("~/img/logo/medhjartatsomkompasslogga.png");
		// Använd punycode-host för att undvika "Invalid URL" hos scrapers
		var absoluteOgImage = $"https://xn--medhjrtatsomkompass-kwb.se{ogImagePath}?v=1";
	}
	<meta property="og:image" content="@absoluteOgImage" />
	<meta property="og:image:secure_url" content="@absoluteOgImage" />
	<meta property="og:image:width" content="1200" />
	<meta property="og:image:height" content="630" />
	<meta property="og:image:alt" content="med Hjärtat som Kompass – logotyp" />

	<!-- Twitter -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="med Hjärtat som Kompass" />
	<meta name="twitter:description" content="En personlig blogg av Sara Gustafsson" />
	<meta name="twitter:image" content="@absoluteOgImage" />

	<title>@ViewData["Title"] - med Hjärtat som Kompass</title>

	<script>
		if (sessionStorage.getItem('sb_first_visit_done') ||
			sessionStorage.getItem('sb_first_visit_done_v2')) {
		  document.documentElement.classList.add('sb-seen');
		}
	</script>
	<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
	<!-- CropperJS CSS (måste komma före site.css så våra overrides vinner) -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.css" />
	<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/blogg.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/bloggadmin.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/SarasBlogg.styles.css" asp-append-version="true" />
	<link href="https://fonts.googleapis.com/css2?family=Cormorant+SC:wght@400;500;600;700&display=swap" rel="stylesheet">

	<script src="~/lib/jquery/dist/jquery.min.js"></script>
</head>


<body>
	<div class="page-wrapper">
		<img src="/img/logo/topleftflowercut.png"
			 data-critical="1"
			 alt="Flower top left corner"
			 class="topleft-corner-flower" />

		<div class="decor-layer">
			<img src="/img/logo/moln.png" alt="" class="cloud cloud-1" />
			<img src="/img/logo/moln.png" alt="" class="cloud cloud-2" />
			<img src="/img/logo/moln.png" alt="" class="cloud cloud-3" />
		</div>
		<header>
			<nav class="navbar navbar-expand-sm navbar-light">
				<div class="container">

					<!-- 1) Hamburgare till höger och kopplad endast till kontomenyn -->
					<button class="navbar-toggler ms-auto" type="button"
							data-bs-toggle="collapse" data-bs-target="#accountNav"
							aria-controls="accountNav" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

					<!-- 2) Endast inloggningsdelen i collapsen, högerställd -->
					<div id="accountNav" class="collapse navbar-collapse justify-content-end">
						<div class="ms-auto">
							<partial name="_LoginPartial" />
						</div>
					</div>
				</div>
			</nav>

			<div class="text-center">
				<h1 class="header-title">
				</h1>
				<br />
			</div>
			<nav class="navbar-expand-sm border-bottom">
				<div class="container d-flex justify-content-center">
					<ul class="mynav">
						<li class="nav-item me-3">
							<a class="menutext nav-link theme-dependent @(ViewContext.RouteData.Values["page"]?.ToString() == "/Index" ? "fw-bold" : "")"
							   asp-area="" asp-page="/Index">Hem</a>
						</li>
						<li class="nav-item me-3">
							<a class="menutext nav-link theme-dependent @(ViewContext.RouteData.Values["page"]?.ToString() == "/Blogg" ? "fw-bold" : "")"
							   asp-area="" asp-page="/Blogg">Blogg</a>
						</li>
						<li class="nav-item me-3">
							<a class="menutext nav-link theme-dependent @(ViewContext.RouteData.Values["page"]?.ToString() == "/AboutMe" ? "fw-bold" : "")"
							   asp-area="" asp-page="/AboutMe">Om mig</a>
						</li>
						@*<li class="nav-item me-3">
							<a class="menutext nav-link theme-dependent @(ViewContext.RouteData.Values["page"]?.ToString() == "/Arkiv" ? "fw-bold" : "")"
							   asp-area="" asp-page="/Arkiv">Arkiv</a>
						</li>*@
						<li class="nav-item me-3">
							<a class="menutext nav-link theme-dependent @(ViewContext.RouteData.Values["page"]?.ToString() == "/Contact" ? "fw-bold" : "")"
							   asp-area="" asp-page="/Contact">Kontakt</a>
						</li>
						@if (User.IsInRole("superuser") || User.IsInRole("admin") || User.IsInRole("superadmin"))
						{
							<li class="nav-item me-3">
								<a class="menutext nav-link theme-dependent @(ViewContext.RouteData.Values["page"]?.ToString()?.StartsWith("/Admin") == true ? "fw-bold" : "")"
								   asp-area="" asp-page="/Admin/Index">Admin</a>
							</li>
						}
					</ul>
				</div>
			</nav>
		</header>

		<br />

		<div class="container">
			<main role="main" class="pb-3">
				@RenderBody()
			</main>

		</div>

		<footer class="border-top footer text-faded">
			<div class="footer-inner container d-flex flex-column align-items-center text-center">
				<span class="theme-dependent small" style="line-height:1.6; color: #5a4839 !important; font-weight: 600; font-family: 'Playfair Display', serif;">
					<strong>
						&copy; 2025 Med Hjärtat som Kompass<br />
						Skapad med kärlek av<br />
						<a href="https://hildenmedia.se"
						   class="theme-dependent text-reset fw-semibold"
						   style="transition: color 0.3s ease;">
							HildenMedia
						</a>
					</strong>
				</span>
				<div class="social-icons d-flex gap-3 justify-content-center mt-2">
					<a href="https://www.instagram.com/saragurrasson/" target="_blank" aria-label="Instagram">
						<svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
							<path d="M7.75 2A5.75 5.75 0 0 0 2 7.75v8.5A5.75 5.75 0 0 0 7.75 22h8.5A5.75 5.75 0 0 0 22 16.25v-8.5A5.75 5.75 0 0 0 16.25 2h-8.5ZM4.5 7.75a3.25 3.25 0 0 1 3.25-3.25h8.5a3.25 3.25 0 0 1 3.25 3.25v8.5a3.25 3.25 0 0 1-3.25 3.25h-8.5a3.25 3.25 0 0 1-3.25-3.25v-8.5Zm7.5 1.25a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm0 1.5a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm4.38-2.63a.88.88 0 1 0 0 1.75.88.88 0 0 0 0-1.75Z" />
						</svg>
					</a>
					<a href="https://www.facebook.com/saragussen" target="_blank" aria-label="Facebook">
						<svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
							<path d="M13.5 9H15l.5-3.5h-2a3 3 0 0 0-3 3v2H9v3h1.5v7h3v-7H15l.5-3H13.5V9Z" />
						</svg>
					</a>
					<a href="https://www.youtube.com/@@saragustafsson8478" target="_blank" aria-label="YouTube">
						<svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
							<path d="M10 15.5v-7l6 3.5-6 3.5ZM2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2 2 6.48 2 12Z" />
						</svg>
					</a>
				</div>
			</div>
			<img src="/img/logo/bottomrightflowercut.png"
				 alt="Flower bottom right corner"
				 class="footer-flower"
				 loading="lazy" decoding="async" />
		</footer>

		<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
		<!-- CropperJS script (måste vara laddat innan vår site.js kör init) -->
		<script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.js"></script>
		<script src="~/js/site.js?b=confirm2" asp-append-version="true"></script>
		<script src="~/js/blogg.js" asp-append-version="true"></script>

		<partial name="_ValidationScriptsPartial" />
		@await RenderSectionAsync("Scripts", required: false)

		@* Signal till overlay (om du återaktiverar den) att första dataladdningen är klar *@
		@if (ViewData["ApiFirstLoadDone"] is true)
		{
			<script>window.sbApiFirstLoadDone?.();</script>
		}
	</div>
	<partial name="_CookieConsentPartial" />
	<!-- Confirm-modal -->
	<div id="confirmModal" class="cmodal" aria-hidden="true" role="dialog" aria-modal="true">
		<div class="cmodal__backdrop" data-cmodal-close></div>
		<div class="cmodal__dialog" role="document" tabindex="-1">
			<h2 id="confirmTitle" class="cmodal__title">Bekräfta</h2>
			<p id="confirmMessage" class="cmodal__text">Ta bort kommentaren?</p>
			<div class="cmodal__actions">
				<button type="button" class="btn btn-outline-secondary" data-cmodal-cancel>Avbryt</button>
				<button type="button" class="btn btn-danger" data-cmodal-ok>Ta bort</button>
			</div>
		</div>
	</div>
</body>
</html>
